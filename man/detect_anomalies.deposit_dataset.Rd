% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/detect_anomalies.R
\name{detect_anomalies.deposit_dataset}
\alias{detect_anomalies.deposit_dataset}
\title{Detect anomalies in a deposit dataset}
\usage{
\method{detect_anomalies}{deposit_dataset}(obj)
}
\arguments{
\item{obj}{An object of class \code{deposit_dataset}, containing
transaction data and anomaly detection parameters.}
}
\value{
A \code{deposit_dataset} object with an added \code{results}
data frame summarising anomalies per customer per month, including:
\itemize{
\item \code{flag_count}: Number of anomaly flags raised.
\item \code{final_flag}: Type(s) of anomaly detected
("More than usual", "High frequency", or "Both").
}
}
\description{
Applies rolling statistical methods to identify anomalous deposit behavior
per customer. Anomalies are flagged based on unusually large deviations
in transaction amounts or unusually high transaction frequencies, relative
to rolling averages. Requires a \code{deposit_dataset} object created
by \code{\link{new_deposit_dataset}}.
}
\details{
The function computes rolling means and standard deviations for both
transaction amounts and frequencies. Z-scores are then calculated and
compared against the thresholds specified in the \code{deposit_dataset}
object (\code{z_thresh} and \code{freq_thresh}).
}
\examples{
transactions <- data.frame(
  customer_id = rep(c("C1", "C2"), each = 5),
  date = rep(seq.Date(Sys.Date() - 4, Sys.Date(), by = "day"), 2),
  amount = c(100, 105, 102, 300, 250, 95, 98, 97, 99, 101)
)

ds <- new_deposit_dataset(transactions, window_size = 3, z_thresh = 2, freq_thresh = 5)
ds <- detect_anomalies(ds)
ds$results

}
\seealso{
\code{\link{new_deposit_dataset}}, \code{\link{plot.deposit_dataset}}
}
